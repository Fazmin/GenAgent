# Scratchpad

## Current Task
Build "oneAgent" - a Next.js + shadcn + SQLite chat agent UI

### Progress
[X] 1. Initialize Next.js app in /oneagent with TypeScript
[X] 2. Install shadcn UI + required components
[X] 3. Install better-sqlite3 for SQLite
[X] 4. Set up SQLite database schema
[X] 5. Create database utility layer
[X] 6. Create API routes (chat, conversations, messages, settings)
[X] 7. Build chat UI components
[X] 8. Wire up GenAgent integration with SSE streaming
[X] 9. Polish CSS (dark mode, typography, scrollbar)
[X] 10. Update README files
[ ] 11. Final verification

## Lessons
- Avoid em dashes in text descriptions
- Use "npx shadcn@latest add <component-name>" for shadcn components
- PowerShell does not support && for chaining commands, use separate shell calls
- Internal type names (MiniAgentEvent, MiniAgentResult, createMiniAgentStream) were kept to avoid breaking API
- Environment variables renamed: OPENCLAW_MINI_PROVIDER -> GEN_AGENT_PROVIDER, OPENCLAW_MINI_AGENT_ID -> GEN_AGENT_AGENT_ID
- Default directories renamed: .openclaw-mini -> .gen-agent, .mini-agent -> .gen-agent
- pi-ai getModel() returns undefined if modelId is undefined or not found in registry; always provide a fallback
- Session lock file requires the parent directory to exist before fs.open with "wx" flag
- npm create-next-app does not allow capital letters in project names
- shadcn's useIsMobile hook is named useIsMobile, not useMobile
- Turbopack cannot resolve file: dependencies - use createRequire + computed string to bypass static analysis
- Turbopack resolveAlias does not support Windows paths ("windows imports not implemented yet")
- For gen-agent package.json, main should be dist/src/index.js (not dist/index.js) when rootDir is "."
- Tailwind CSS v4 uses @plugin directive for plugins instead of config file
- In PowerShell, curl is an alias for Invoke-WebRequest, not the real curl
